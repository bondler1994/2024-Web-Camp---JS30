<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>JS + CSS Clock</title>
        <link rel="icon" href="https://fav.farm/ğŸ”¥" />
    </head>
    <body>
        <div class="clock">
            <div class="clock-face">
                <div class="hand hour-hand"></div>
                <div class="hand min-hand"></div>
                <div class="hand second-hand"></div>
            </div>
        </div>

        <style>
            html {
                background: #018ded url(https://unsplash.it/1500/1000?image=881&blur=5);
                background-size: cover;
                font-family: "helvetica neue";
                text-align: center;
                font-size: 10px;
            }

            body {
                margin: 0;
                font-size: 2rem;
                display: flex;
                flex: 1;
                min-height: 100vh;
                align-items: center;
            }

            .clock {
                width: 30rem;
                height: 30rem;
                border: 20px solid white;
                border-radius: 50%;
                margin: 50px auto;
                position: relative;
                padding: 2rem;
                box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.1), inset 0 0 0 3px #efefef, inset 0 0 10px black, 0 0 10px rgba(0, 0, 0, 0.2);
            }

            .clock-face {
                position: relative;
                width: 100%;
                height: 100%;
                transform: translateY(-3px); /* account for the height of the clock hands */
            }

            .hand {
                width: 50%;
                height: 6px;
                background: black;
                position: absolute;
                top: 50%;
                transform: rotate(90deg);
                /* èª¿æ•´pivotè»¸å¿ƒä½ç½®ï¼Œ100%å°±æ˜¯æœ€å³é‚Š */
                transform-origin: 100%;
                /* æ­é…ä¸‹é¢è²èŒ²æ›²ç·šä½¿ç”¨ */
                transition: all 0.05s;
                /* è²èŒ²æ›²ç·šï¼Œå¯ä»¥èª¿æ•´å‹•ç•«å‹•æ…‹ï¼Œæ™‚é˜å°±æœƒæœ‰é “é»åƒåœ¨click click */
                transition-timing-function: cubic-bezier(0.1, 3.68, 1, -0.58);
            }
        </style>

        <script>
            const secondHand = document.querySelector(".second-hand");
            const minsHand = document.querySelector(".min-hand");
            const hourHand = document.querySelector(".hour-hand");

            function setDate() {
                const now = new Date();

                const seconds = now.getSeconds();
                //è¨­å®šç§’æ•¸,ç¸½å…±æœƒæœ‰60ç§’ä¸¦ä¸”è½‰360åº¦ï¼Œ90æ˜¯æŒ‡æŒ‡é‡åˆå§‹ä½ç½®(æ‰€ä»¥æœƒåœ¨æ­£ä¸­å¿ƒ)
                const secondsDegrees = (seconds / 60) * 360 + 90;
                //æ“ä½œclassåœ¨cssè£¡é¢å¾—transformå¾—åƒæ•¸
                secondHand.style.transform = `rotate(${secondsDegrees}deg)`;

                const minutes = now.getMinutes();
                const minutesDegrees = (minutes / 60) * 360 + 90;
                minsHand.style.transform = `rotate(${minutesDegrees}deg)`;

                const hour = now.getHours();
                const hourDegrees = (hour / 12) * 360 + (min / 60) * 30 + 90;
                hourHand.style.transform = `rotate(${hourDegrees}deg)`;
                // *ä»¥ä¸‹æ˜¯ç‚ºäº†è§£æ±ºç•¶æ™‚é–“è·³è½‰åˆ°0æ™‚ï¼Œæœƒè·³è½‰å‡ºç¾bugç¾è±¡å¾—å•é¡Œ
                // ç¶“éä½œè€…æç¤ºå¯ä»¥ä½¿ç”¨è®“transformæŒçºŒè½‰å‹•å¾—æ–¹å¼,æˆ–æ˜¯å–æ¶ˆtransition
                // æˆ‘é¸äº†ç¬¬äºŒå€‹ä¾†è§£æ±º
                // æˆ‘é€™é‚Šæƒ³åƒè¨­ç«‹ä¸€å€‹æ¢ä»¶æ˜¯æª¢æŸ¥ï¼Œç•¶secåˆ°0æ™‚ï¼Œå•Ÿå‹•è´Šåœtransition å¾— func
                if (seconds === 0) {
                    pauseTransition();
                }
            }
            //è¨­å®šè´Šåœtransition func
            function pauseTransition() {
                // ç”¨querySelectorAllé¸å–å…¨éƒ¨hand classï¼Œä¸¦ä¸”ç”¨forEaché¸å–å…¨éƒ¨ï¼Œ
                // å†è¦æ”¹è®Šåœ¨cssè£¡é¢transtitionå±¬æ€§å¾—åƒæ•¸è½‰ç‚ºnone è¨˜å¾—noneè¦ç”¨å­—ä¸²
                document.querySelectorAll(".hand").forEach((hand) => {
                    hand.style.transition = `none`;
                });
                //å»¶çºŒä¸Šé¡Œï¼Œéš¨å¾Œè¨­å®šæ™‚é–“å·®ï¼Œå»¶é²ä¸€ç§’ï¼Œç§’æ•¸ç‚º 0 æ™‚é—œé–‰ï¼Œéäº†1ç§’ ä¹Ÿå°±æ˜¯æ™‚é–“1ç§’å°±æœƒåœ¨å¾æ–°è³¦äºˆtransitionåƒæ•¸
                setTimeout(() => {
                    document.querySelectorAll(".hand").forEach((hand) => {
                        hand.style.transition = `all 0.05s`;
                    }, 1000);
                });
            }

            //æ“ä½œ setDate funcï¼Œä½¿å®ƒæœ‰é–“æ­‡æ€§å¾—æ¯1ï¼ˆä¸€æ¬¡
            setInterval(setDate, 1000);
            setDate();
        </script>
    </body>
</html>
